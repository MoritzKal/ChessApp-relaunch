.PHONY: docs fmt lint links ssot api-metrics

docs: fmt lint links ssot

fmt:
	npx prettier --plugin-search-dir . README.md docs/API_ENDPOINTS.md docs/OBSERVABILITY.md docs/PROJECT_OVERVIEW.md docs/ROADMAP.md docs/STATE.md docs/PR_SUMMARY.md docs/REPORT_DUPLICATES.md docs/roles/*.md docs/chatgpt-project/*.md docs/tooling/SSOT_RULES.md --write

lint:
	npx markdownlint-cli2 README.md docs/API_ENDPOINTS.md docs/OBSERVABILITY.md docs/PROJECT_OVERVIEW.md docs/ROADMAP.md docs/STATE.md docs/PR_SUMMARY.md docs/REPORT_DUPLICATES.md docs/roles/*.md docs/chatgpt-project/*.md docs/tooling/SSOT_RULES.md

links:
	# Prüfe nur Docs-Links; localhost/Swagger dürfen fehlschlagen (→ config ignoriert sie)
	find docs -name "*.md" -print0 | xargs -0 -n1 -I{} markdown-link-check -q -c .markdownlinkcheck.json "{}" || true

ssot:
	python3 scripts/docs_ssot_check.py

api-metrics:
	python3 scripts/extract_endpoints.py > docs/API_ENDPOINTS.auto.md || true
	python3 scripts/extract_metrics.py > docs/METRICS.auto.md || true
